<app-default-form-layout
	title="Cadastro de produto"
	(submitClicked)="onSubmit()"
>
	<form class="form-wrapper" [formGroup]="form">

		<app-form-input
			labelText="Código de barras"
			type="number"
			[growthree]="true"
			[control]="getControl('barCode')"
		/>

		<div class="product-name">
			<app-form-input
				labelText="Nome do produto"
				type="text"
				[control]="getControl('name')"
			/>
		</div>

		<app-form-input
			labelText="Marca do produto"
			type="text"
			[growthree]="true"
			[control]="getControl('brand')"
		/>

		<app-form-category-select
			[control]="getControl('categoryIds')!"
			[categories]="availableCategories"
			(selectedIdsChange)="onCategoriesChange($event)">
		</app-form-category-select>


		<div class="product-price">
			<app-form-input
				labelText="Preço atual"
				type="text"
				placeholder="0,00"
				mask="separator.2"
				thousandSeparator="."
				decimalMarker=","
				[control]="getControl('price')"
			/>

			<app-form-utility-button
				src="svg/edit-icon.svg"
			>
			</app-form-utility-button>
		</div>

		<div class="measure-packaging">
			<app-form-unity-measure-select
				[control]="getControl('unitOfMeasure')">
			</app-form-unity-measure-select>

			<app-form-packaging-type-select
				[control]="getControl('packagingType')">
			</app-form-packaging-type-select>
		</div>

		<div class="product-imagem-url">
			<div class="product-image">
				<app-form-input
					labelText="Insira o link ou carregue a imagem"
					type="text"
					[growfour]="true"
					[control]="getControl('imgUrl')"
					(input)="onImageUrlChange()"
				></app-form-input>

				<input type="file" #fileInput accept="image/*" hidden (change)="onFileSelected($event)" />

				<app-form-utility-button
					src="svg/find-file-icon.svg"
					(click)="fileInput.click()">
				</app-form-utility-button>

				<app-form-utility-button
					class="cancelBtn"
					src="svg/cancel-icon.svg"
					(click)="clearImage()">
				</app-form-utility-button>
			</div>

			<div class="image-preview-card" [ngClass]="{'has-image': previewImage()}">
				<img [src]="previewImage()" />
			</div>
		</div>

	</form>

</app-default-form-layout>
